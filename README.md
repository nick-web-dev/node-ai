# Sales Insights API

This API processes sales data and provides computed analytics along with a natural language summary generated by Google Gemini AI.

## Features
- Accepts an array of sales records via `POST /sales/insights`.
- Computes key sales metrics:
  - Total sales
  - Average sales per transaction
  - Best performing product category
  - Sales breakdown per category
- Generates a business-friendly summary using Google Gemini AI.

## Requirements
- Node.js (Latest LTS version recommended)
- Next.js framework
- Google Gemini API key
- Installed dependencies:
  ```sh
  npm install @google/generative-ai
  ```

## Setup Instructions
1. Clone the repository and navigate to the project directory.
2. Install required dependencies:
   ```sh
   npm install
   ```
3. Create a `.env.local` and `.env.test` file and add your Gemini API key:
   ```sh
   GEMINI_API_KEY=your_google_gemini_api_key
   ```
4. Start the Next.js application:
   ```sh
   npm run dev
   ```

## API Endpoint
### `POST /sales/insights`
#### Request Body
Send an array of sales records:
```json
[
  {
    "name": "Alice Johnson",
    "email": "alice.johnson@example.com",
    "product": "Widget A",
    "category": "Widgets",
    "amount": 120.50,
    "date": "2023-03-01",
    "state": "California"
  }
]
```

#### Response
```json
{
  "insights": {
    "totalSales": 120.5,
    "averageSale": 120.5,
    "categorySales": {
      "Widgets": 120.5
    },
    "bestPerformingCategory": "Widgets"
  },
  "summary": "Total sales amounted to $120.50 with an average transaction of $120.50. The best-performing category was Widgets."
}
```

## Error Handling
- Returns `400 Bad Request` for invalid input.
- Returns `500 Internal Server Error` for unexpected failures.

## License
This project is licensed under the MIT License.

